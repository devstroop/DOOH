@attribute [Authorize]
<PageTitle>Edit Adboard</PageTitle>

<RadzenColumn SizeMD=12>
    <RadzenAlert Shade="Shade.Lighter" Variant="Variant.Flat" Size="AlertSize.Small" AlertStyle="AlertStyle.Danger" Visible="@errorVisible">Cannot save Adboard</RadzenAlert>
    <RadzenTemplateForm TItem="DOOH.Server.Models.DOOHDB.Adboard" Data="@adboard" Visible="@(adboard != null)" Submit="@FormSubmit">
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Provider" Component="Provider" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@providersForProviderId" TextProperty="ContactName" ValueProperty="ProviderId" AllowClear=true
                                        Placeholder="Choose Provider" style="display: block; width: 100%" @bind-Value="@adboard.ProviderId" Name="ProviderId"
                                        SelectedValue=@providersForProviderIdValue Count=@providersForProviderIdCount LoadData=@providersForProviderIdLoadData />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Category" Component="Category" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@categoriesForCategoryId" TextProperty="CategoryName" ValueProperty="CategoryId" AllowClear=true
                                        Placeholder="Choose Category" style="display: block; width: 100%" @bind-Value="@adboard.CategoryId" Name="CategoryId"
                                        SelectedValue=@categoriesForCategoryIdValue Count=@categoriesForCategoryIdCount LoadData=@categoriesForCategoryIdLoadData />
            </RadzenColumn>
        </RadzenRow>


        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Motherboard" Component="Motherboard" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@motherboardsForMotherboardId" TextProperty="Model" ValueProperty="MotherboardId" AllowClear=true
                                        Placeholder="Choose Motherboard" style="display: block; width: 100%" @bind-Value="@adboard.MotherboardId" Name="MotherboardId"
                                        SelectedValue=@motherboardsForMotherboardIdValue Count=@motherboardsForMotherboardIdCount LoadData=@motherboardsForMotherboardIdLoadData>
                    <Template Context="data">
                        <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
                            <RadzenText Text="@data.Brand?.BrandName" Visible="!String.IsNullOrEmpty(data.Brand?.BrandName)" class="rz-mb-0" />
                            <RadzenText Text="@data.Model" class="rz-mb-0" />
                        </RadzenStack>
                    </Template>
                </RadzenDropDownDataGrid>
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Display" Component="Display" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@displaysForDisplayId" TextProperty="Model" ValueProperty="DisplayId" AllowClear=true
                                        Placeholder="Choose Display" style="display: block; width: 100%" @bind-Value="@adboard.DisplayId" Name="DisplayId"
                                        SelectedValue=@displaysForDisplayIdValue Count=@displaysForDisplayIdCount LoadData=@displaysForDisplayIdLoadData>
                    <Template Context="data">
                        <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
                            <RadzenText Text="@data.Brand?.BrandName" Visible="!String.IsNullOrEmpty(data.Brand?.BrandName)" class="rz-mb-0" />
                            <RadzenText Text="@data.Model" class="rz-mb-0" />
                        </RadzenStack>
                    </Template>
                </RadzenDropDownDataGrid>
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center">
                    <RadzenLabel Text="Rate (₹)/s" Component="BaseRatePerSecond" />
                    <RadzenBadge Text="Base" />
                </RadzenStack>
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenNumeric style="display: block; width: 100%" @bind-Value="@adboard.BaseRatePerSecond" Name="BaseRatePerSecond" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Images" Component="Images" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <UploadComponent ObjectFit="cover" Items="@adboardImages.Select(x => x.Image).ToList()" Add="@OnAddImage" Delete="@OnDeleteImage" Refresh="@OnRefreshImage" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Location" Component="Location" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenNumeric @bind-Value="@adboard.Latitude" Name="Latitude" Placeholder="Lattitude" />
                <RadzenNumeric @bind-Value="@adboard.Longitude" Name="Longitude" Placeholder="Longitude" />
                <RadzenButton ButtonStyle="ButtonStyle.Light" Icon="location_on" Click="@GetLocation" />
            </RadzenColumn>
        </RadzenRow>
        @* <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Latitude" Component="Latitude" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenNumeric style="display: block; width: 100%" @bind-Value="@adboard.Latitude" Name="Latitude" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Longitude" Component="Longitude" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenNumeric style="display: block; width: 100%" @bind-Value="@adboard.Longitude" Name="Longitude" />
            </RadzenColumn>
        </RadzenRow> *@
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Sign Name" Component="SignName" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenTextArea style="display: block; width: 100%" @bind-Value="@adboard.SignName" Name="SignName" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="City" Component="City" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@citiesForCityName" TextProperty="CityName" ValueProperty="CityName" AllowClear=true
                                        Placeholder="Choose City" style="display: block; width: 100%" @bind-Value="@adboard.CityName" Name="CityName"
                                        SelectedValue=@citiesForCityNameValue Count=@citiesForCityNameCount LoadData=@citiesForCityNameLoadData />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="State" Component="State" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@statesForStateName" TextProperty="StateName" ValueProperty="StateName" AllowClear=true
                                        Placeholder="Choose State" style="display: block; width: 100%" @bind-Value="@adboard.StateName" Name="StateName"
                                        SelectedValue=@statesForStateNameValue Count=@statesForStateNameCount LoadData=@statesForStateNameLoadData />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Country" Component="Country" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenDropDownDataGrid Data="@countriesForCountryName" TextProperty="CountryName" ValueProperty="CountryName" AllowClear=true
                                        Placeholder="Choose Country" style="display: block; width: 100%" @bind-Value="@adboard.CountryName" Name="CountryName"
                                        SelectedValue=@countriesForCountryNameValue Count=@countriesForCountryNameCount LoadData=@countriesForCountryNameLoadData />
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow style="margin-bottom: 1rem">
            <RadzenColumn SizeMD="4">
                <RadzenLabel Text="Is Active" Component="IsActive" style="width: 100%" />
            </RadzenColumn>
            <RadzenColumn SizeMD="8">
                <RadzenSwitch @bind-Value="@adboard.IsActive" Name="IsActive" />
            </RadzenColumn>
        </RadzenRow>
        <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
            <RadzenButton ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="Save" Variant="Variant.Flat" IsBusy="@IsSaving" BusyText="Saving" />
            <RadzenButton ButtonStyle="ButtonStyle.Light" Text="Cancel" Variant="Variant.Flat" Click="@CancelButtonClick" />
        </RadzenStack>
    </RadzenTemplateForm>
</RadzenColumn>

