@layout AdminLayout
@page "/admin/models"

@attribute [Authorize]

<PageTitle>Models (Adboard)</PageTitle>
<RadzenStack>
    <RadzenRow AlignItems="AlignItems.Center">
        <RadzenColumn Size="12" SizeMD="6">
            <RadzenText Text="Models (Adboard)" TextStyle="TextStyle.H3" TagName="TagName.H1" style="margin: 0" />
        </RadzenColumn>
        <RadzenColumn Size="12" SizeMD="6">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                <RadzenButton Icon="add" Click="@AddButtonClick" Variant="Variant.Flat" />
            </RadzenStack>
        </RadzenColumn>
    </RadzenRow>
    <RadzenTextBox Placeholder="Search ..." style="display: block; width: 100%" @oninput="@Search" aria-label="Search by all string columns" />
    <RadzenRow>
        <RadzenColumn SizeMD=GridColumnSize>
            <RadzenCard style="height: 100%">
                <RadzenDataGrid @ref="grid0" ColumnWidth="120px" AllowFiltering="true" FilterMode="FilterMode.Advanced" AllowPaging="true" AllowSorting="true" ShowPagingSummary="true" PageSizeOptions=@(new int[]{5, 10, 20, 30})
                                Data="@adboardModels" LoadData="@Grid0LoadData" Count="@count" TItem="DOOH.Server.Models.DOOHDB.AdboardModel" RowSelect="@EditRow">
                    <Columns>
                        <RadzenDataGridColumn TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Property="AdboardModelId" Title="Id">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Property="Model" Title="Model">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Property="Motherboard.Model" Title="Motherboard">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Property="Display.Model" Title="Display">
                        </RadzenDataGridColumn>
                        <RadzenDataGridColumn TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Filterable="false" Sortable="false" Width="70px" TextAlign="TextAlign.Center">
                            <Template Context="adboardModel">

                                <RadzenButton ButtonStyle="ButtonStyle.Danger" Icon="delete" Size="ButtonSize.Medium"
                                              Shade="Shade.Lighter" Variant="Variant.Flat"
                                              Click=@(args => GridDeleteButtonClick(args, adboardModel)) @onclick:stopPropagation="true" />
                            </Template>
                        </RadzenDataGridColumn>
                    </Columns>

                </RadzenDataGrid>
            </RadzenCard>

        </RadzenColumn>
        <RadzenColumn SizeMD=@GridColumnSizeForm Visible=@(GridColumnSizeForm > 0)>
            <RadzenCard style="height: 100%;margin-top:0px;">
                <RadzenAlert Shade="Shade.Lighter" Variant="Variant.Flat" Size="AlertSize.Small" AlertStyle="AlertStyle.Danger" Visible="@errorVisible">Cannot save AdboardModel</RadzenAlert>
                <RadzenTemplateForm TItem="DOOH.Server.Models.DOOHDB.AdboardModel" Data="@adboardModel" Visible="@(adboardModel != null)" Submit="@FormSubmit">
                    <RadzenRow style="margin-bottom: 1rem">
                        <RadzenColumn SizeMD="3">
                            <RadzenLabel Text="Id" Component="ModelId" style="width: 100%" />
                        </RadzenColumn>
                        <RadzenColumn SizeMD="9">
                            <RadzenText style="display: block; width: 100%" Text="@adboardModel.Model" Name="ModelId" />
                        </RadzenColumn>
                    </RadzenRow>

                    <RadzenRow style="margin-bottom: 1rem">
                        <RadzenColumn SizeMD="3">
                            <RadzenLabel Text="Model" Component="Model" style="width: 100%" />
                        </RadzenColumn>
                        <RadzenColumn SizeMD="9">
                            <RadzenTextBox style="display: block; width: 100%" @bind-Value="@adboardModel.Model" Name="Model" />
                            <RadzenRequiredValidator Component="Model" Text="Model is required" />
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenRow style="margin-bottom: 1rem">
                        <RadzenColumn SizeMD="3">
                            <RadzenLabel Text="Motherboard" Component="Motherboard" style="width: 100%" />
                        </RadzenColumn>
                        <RadzenColumn SizeMD="9">
                            <RadzenDropDownDataGrid Data="@motherboardsForMotherboardId" TextProperty="Model" ValueProperty="MotherboardId" AllowClear=true
                                                    Placeholder="Choose Motherboard" style="display: block; width: 100%" @bind-Value="@adboardModel.MotherboardId" Name="MotherboardId"
                                                    SelectedValue=@motherboardsForMotherboardIdValue Count=@motherboardsForMotherboardIdCount LoadData=@motherboardsForMotherboardIdLoadData>
                                <Template Context="data">
                                    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
                                        <RadzenText Text="@data.Brand?.BrandName" Visible="!String.IsNullOrEmpty(data.Brand?.BrandName)" class="rz-mb-0" />
                                        <RadzenText Text="@data.Model" class="rz-mb-0" />
                                    </RadzenStack>
                                </Template>
                            </RadzenDropDownDataGrid>
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenRow style="margin-bottom: 1rem">
                        <RadzenColumn SizeMD="3">
                            <RadzenLabel Text="Display" Component="Display" style="width: 100%" />
                        </RadzenColumn>
                        <RadzenColumn SizeMD="9">
                            <RadzenDropDownDataGrid Data="@displaysForDisplayId" TextProperty="Model" ValueProperty="DisplayId" AllowClear=true
                                                    Placeholder="Choose Display" style="display: block; width: 100%" @bind-Value="@adboardModel.DisplayId" Name="DisplayId"
                                                    SelectedValue=@displaysForDisplayIdValue Count=@displaysForDisplayIdCount LoadData=@displaysForDisplayIdLoadData>
                                <Template Context="data">
                                    <RadzenStack Orientation="Orientation.Horizontal" Gap="0.25rem">
                                        <RadzenText Text="@data.Brand?.BrandName" Visible="!String.IsNullOrEmpty(data.Brand?.BrandName)" class="rz-mb-0" />
                                        <RadzenText Text="@data.Model" class="rz-mb-0" />
                                    </RadzenStack>
                                </Template>
                            </RadzenDropDownDataGrid>
                        </RadzenColumn>
                    </RadzenRow>
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" JustifyContent="JustifyContent.End" Gap="0.5rem">
                        <RadzenButton ButtonStyle="ButtonStyle.Primary" ButtonType="ButtonType.Submit" Icon="save" Text="Save" Variant="Variant.Flat" />
                        <RadzenButton ButtonStyle="ButtonStyle.Light" Text="Cancel" Variant="Variant.Flat" Click="@CancelButtonClick" Visible=true />
                    </RadzenStack>
                </RadzenTemplateForm>
            </RadzenCard>
        </RadzenColumn>
    </RadzenRow>
</RadzenStack>
