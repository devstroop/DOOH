@layout AdminLayout
@* @page "/admin/campaigns/editor" *@
@attribute [Authorize]
<PageTitle>New Campaign</PageTitle>
<RadzenStack>
    <RadzenRow class="rz-mb-2" JustifyContent="Radzen.JustifyContent.SpaceBetween" AlignItems="AlignItems.Center" Gap="1rem" RowGap="1rem">
        <RadzenStack Orientation="Orientation.Horizontal" Wrap="FlexWrap.Wrap" AlignItems="AlignItems.Center" Gap="1rem">
            <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                <RadzenIcon Icon="campaign" Style="font-size: 28px" />
                <RadzenText Text="@CampaignName" TextStyle="TextStyle.H5" style="margin: 0" Visible="!CampaignNameEditable" />
                <RadzenTextBox style="appearance: none; font-weight: 500; border: none; text-align: start; font-size: 16px; padding-inline: 6px" @bind-Value="@CampaignName" Name="CampaignName" Visible="@CampaignNameEditable" />
                <RadzenButton class="rz-ml-2" Icon="edit" ButtonStyle="ButtonStyle.Light" Size="ButtonSize.Small" Visible="!CampaignNameEditable" Click="@((args) => CampaignNameEditable=true)" />
                <RadzenButton class="rz-ml-2" Icon="check" ButtonStyle="ButtonStyle.Primary" Size="ButtonSize.Small" Visible="@CampaignNameEditable" Click="@((args) => CampaignNameEditable=false)" />
            </RadzenStack>
            <RadzenFieldset Text="Date">
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                    <RadzenDatePicker @bind-Value="@StartDate" DateFormat="d" Style="width: 150px" />
                    <RadzenText Text="to" class="rz-mb-0" />
                    <RadzenDatePicker @bind-Value="@EndDate" DateFormat="d" Style="width: 150px" Visible="!Continuous" />
                    <RadzenCheckBox Placeholder="Continuous" @bind-Value="@Continuous" />
                    <RadzenText Text="Continuous" class="rz-mb-0" Style="font-size: 14px; font-weight: 500;" />
                </RadzenStack>
            </RadzenFieldset>

            <RadzenFieldset Text="Budget">
                <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="1rem">
                    <RadzenSelectBar TValue="int" Size="ButtonSize.Small" @bind-Value="@BudgetType">
                        <Items>
                            <RadzenSelectBarItem Value="1" Text="Total" />
                            <RadzenSelectBarItem Value="2" Text="Daily" />
                        </Items>
                    </RadzenSelectBar>
                    <RadzenStack Orientation="Orientation.Horizontal" AlignItems="AlignItems.Center" Gap="0.5rem">
                        <RadzenButton Icon="remove" Size="ButtonSize.Small" Click="@((args) => Budget -= 100)" />
                        <RadzenNumeric @bind-Value="@Budget" Name="Budget" Min="0" Max="10000" Style="display: inline-flex; flex-wrap:wrap; width: 84px; appearance: none; font-weight: bolder; border: none; text-align: center; font-size: 16px;" />
                        <RadzenButton Icon="add" Size="ButtonSize.Small" Click="@((args) => Budget += 100)" />
                    </RadzenStack>
                </RadzenStack>
            </RadzenFieldset>

        </RadzenStack>
        <RadzenStack Orientation="Orientation.Horizontal" JustifyContent="JustifyContent.End" AlignItems="AlignItems.Center" Gap="0.5rem">
            <RadzenButton Icon="save" Text="Save" ButtonStyle="ButtonStyle.Primary" Click="@SaveCampaign" />
            <RadzenButton Icon="cancel" Text="Cancel" ButtonStyle="ButtonStyle.Secondary" Click="@Cancel" />
        </RadzenStack>
    </RadzenRow>

    <RadzenTabs @bind-SelectedIndex="@selectedTabIndex">
        <Tabs>
            <RadzenTabsItem Text="Locations" Icon="location_on">
                <CampaignAdboardsEditor CampaignId="@Campaign.CampaignId" />
            </RadzenTabsItem>
            <RadzenTabsItem Text="Advertisements" Icon="featured_video">
                <CampaignAdvertisementsEditor CampaignId="@Campaign.CampaignId" />
            </RadzenTabsItem>
            <RadzenTabsItem Text="Schedule" Icon="schedule">
                <CampaignScheduleEditor CampaignId="@Campaign.CampaignId" />
            </RadzenTabsItem>
            <RadzenTabsItem Text="Review" Icon="grading">
                <Review CampaignId="@Campaign.CampaignId" />
            </RadzenTabsItem>
        </Tabs>
    </RadzenTabs>
</RadzenStack>

<style>
    .rz-dialog-titlebar {
        background-color: #fff;
    }

    .rz-dialog-content {
        background-color: #fff;
    }

    .rz-spinner-button {
        display: none;
    }
</style>

